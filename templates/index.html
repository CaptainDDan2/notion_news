<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°˜ë„ì²´ ë‰´ìŠ¤ ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-microchip"></i>
                <span>ë°˜ë„ì²´ ë‰´ìŠ¤</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-section="dashboard">
                <i class="fas fa-home"></i>
                <span>ëŒ€ì‹œë³´ë“œ</span>
            </a>
            <a href="#" class="nav-item" data-section="priority">
                <i class="fas fa-star"></i>
                <span>ìš°ì„ ìˆœìœ„</span>
            </a>
            <a href="#" class="nav-item" data-section="recent">
                <i class="fas fa-clock"></i>
                <span>ìµœì‹  ë‰´ìŠ¤</span>
            </a>
            <a href="#" class="nav-item" data-section="personalized">
                <i class="fas fa-user-cog"></i>
                <span>ë§ì¶¤ ë‰´ìŠ¤</span>
            </a>
            <a href="#" class="nav-item" data-section="trends">
                <i class="fas fa-chart-line"></i>
                <span>íŠ¸ë Œë“œ</span>
            </a>
            <a href="#" class="nav-item" data-section="search">
                <i class="fas fa-search"></i>
                <span>ê²€ìƒ‰</span>
            </a>
            <a href="#" class="nav-item" data-section="bookmarks">
                <i class="fas fa-bookmark"></i>
                <span>ë¶ë§ˆí¬</span>
            </a>
            <a href="/preferences" class="nav-item">
                <i class="fas fa-cog"></i>
                <span>ì„¤ì •</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <button onclick="manualCrawl()" class="crawl-btn">
                <i class="fas fa-sync-alt"></i>
                ë‰´ìŠ¤ ì—…ë°ì´íŠ¸
            </button>
        </div>
    </aside>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
        <!-- í—¤ë” -->
        <header class="main-header">
            <div class="header-left">
                <h1 id="page-title">ë°˜ë„ì²´ ë‰´ìŠ¤ ëŒ€ì‹œë³´ë“œ</h1>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="ê¸°ì‚¬ ê²€ìƒ‰...">
                </div>
                <div class="stats-summary">
                    <span class="stat">
                        <i class="fas fa-newspaper"></i>
                        <span id="total-articles">{{ total_articles }}</span>
                    </span>
                    <span class="stat">
                        <i class="fas fa-calendar-day"></i>
                        <span id="today-articles">{{ today_articles }}</span>
                    </span>
                </div>
            </div>
        </header>

        <!-- ì»¨í…ì¸  ì˜ì—­ -->
        <div class="content-area">
            <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
            <section id="dashboard-section" class="content-section active">
                <div class="section-header">
                    <h2>ğŸ“Š ê°œìš”</h2>
                </div>
                
                <div class="overview-grid">
                    <div class="overview-card">
                        <h3>ğŸ”¥ ìš°ì„ ìˆœìœ„ ë†’ì€ ë‰´ìŠ¤</h3>
                        <div class="priority-articles">
                            {% for article in priority_articles %}
                            <div class="article-card priority-card" onclick="showArticleDetail({{ article.id }})">
                                <div class="article-header">
                                    <span class="priority-badge priority-{{ article.priority_score|round|int }}">
                                        {{ "%.1f"|format(article.priority_score) }}
                                    </span>
                                    <span class="source">{{ article.source }}</span>
                                </div>
                                <h4>{{ article.title }}</h4>
                                <p class="summary">{{ article.summary[:150] }}...</p>
                                <div class="article-footer">
                                    <span class="date">{{ article.published_date.strftime('%Y-%m-%d %H:%M') if article.published_date else 'ë°©ê¸ˆ ì „' }}</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <h3>â° ìµœì‹  ë‰´ìŠ¤</h3>
                        <div class="recent-articles">
                            {% for article in recent_articles %}
                            <div class="article-item" onclick="showArticleDetail({{ article.id }})">
                                <div class="article-info">
                                    <h5>{{ article.title }}</h5>
                                    <div class="article-meta">
                                        <span class="source">{{ article.source }}</span>
                                        <span class="date">{{ article.crawled_at.strftime('%H:%M') if article.crawled_at else 'ë°©ê¸ˆ ì „' }}</span>
                                    </div>
                                </div>
                                <div class="priority-indicator">
                                    <span class="priority-score">{{ "%.1f"|format(article.priority_score) }}</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </section>

            <!-- ìš°ì„ ìˆœìœ„ ì„¹ì…˜ -->
            <section id="priority-section" class="content-section">
                <div class="section-header">
                    <h2>â­ ìš°ì„ ìˆœìœ„ ë†’ì€ ë‰´ìŠ¤</h2>
                </div>
                <div id="priority-articles-container" class="articles-grid"></div>
            </section>

            <!-- ìµœì‹  ë‰´ìŠ¤ ì„¹ì…˜ -->
            <section id="recent-section" class="content-section">
                <div class="section-header">
                    <h2>ğŸ•’ ìµœì‹  ë‰´ìŠ¤</h2>
                </div>
                <div id="recent-articles-container" class="articles-grid"></div>
            </section>

            <!-- ê°œì¸í™”ëœ ë‰´ìŠ¤ ì„¹ì…˜ -->
            <section id="personalized-section" class="content-section">
                <div class="section-header">
                    <h2>ğŸ‘¤ ë§ì¶¤ ë‰´ìŠ¤</h2>
                    <p class="section-subtitle">ê´€ì‹¬ì‚¬ì™€ ì„¤ì •ì— ë§ì¶˜ ê¸°ì‚¬ë“¤ì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</p>
                </div>
                <div id="personalized-articles-container" class="articles-grid"></div>
            </section>

            <!-- íŠ¸ë Œë“œ ì„¹ì…˜ -->
            <section id="trends-section" class="content-section">
                <div class="section-header">
                    <h2>ğŸ“ˆ í˜„ì¬ íŠ¸ë Œë“œ</h2>
                </div>
                <div id="trends-container"></div>
            </section>

            <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
            <section id="search-section" class="content-section">
                <div class="section-header">
                    <h2>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h2>
                </div>
                <div id="search-results-container" class="articles-grid"></div>
            </section>

            <!-- ë¶ë§ˆí¬ ì„¹ì…˜ -->
            <section id="bookmarks-section" class="content-section">
                <div class="section-header">
                    <h2>ğŸ“‘ ë¶ë§ˆí¬</h2>
                    <p class="section-subtitle">ì €ì¥í•´ë‘” ê¸°ì‚¬ë“¤ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                </div>
                <div id="bookmarks-container" class="articles-grid"></div>
            </section>
        </div>
    </main>

    <!-- ê¸°ì‚¬ ìƒì„¸ ëª¨ë‹¬ -->
    <div id="article-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="article-meta">
                    <span class="source" id="modal-source"></span>
                    <span class="date" id="modal-date"></span>
                    <span class="priority-badge" id="modal-priority"></span>
                </div>
                <div class="article-summary" id="modal-summary"></div>
                <div class="article-content" id="modal-content"></div>
                <div class="article-actions">
                    <button id="bookmark-btn" onclick="toggleBookmark()" class="btn-bookmark">
                        <i class="far fa-bookmark"></i>
                        ë¶ë§ˆí¬
                    </button>
                    <a id="modal-link" href="#" target="_blank" class="btn-primary">ì›ë¬¸ ë³´ê¸°</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>ë¡œë”© ì¤‘...</p>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div id="toast" class="toast"></div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>